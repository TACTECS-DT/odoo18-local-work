<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="requests_followup" name="Expense requests">
        <t t-call="portal.portal_layout">
            <style>
                .tag-container {
                    display: flex;
                    flex-wrap: wrap;
                    align-items: center;
                }

                .tag {
                    display: inline-block;
                    background-color: #007bff;
                    color: white;
                    padding: 4px 8px;
                    margin: 4px;
                    font-size: 14px;
                    border-radius: 20px;
                    cursor: pointer;
                    text-decoration: none;
                }

                .tag:hover {
                    background-color: #0069d9;
                }

                .categories-tags .tag {
                    display: inline-block;
                    padding: 4px 8px;
                    background-color: #007bff;
                    color: #fff;
                    margin: 4px;
                    border-radius: 4px;
                    text-decoration: none;
                }

                .categories-tags .tag:hover {
                    background-color: #0056b3;
                }
            </style>
            <t t-set="wrap_classes" t-value="'o_portal_bg_dark'"/>
            <t t-call="portal.portal_record_layout">
                <t t-set="card_header">
                    <div class="row no-gutters">
                        <div class="col-md">
                            <h5 class="mb-1 mb-md-0">
                                <span t-field="expense_request_id.name"/>
                                <small class="text-muted">(#<span t-field="expense_request_id.id"/>)
                                </small>
                            </h5>
                        </div>
                        <div class="col-md text-md-right">
                            <strong class="text-right">Status:</strong>
                            <span t-field="expense_request_id.state" class=" badge badge-pill badge-info"
                                  title="Current stage of this request"/>
                        </div>

                        <div class="col-md text-md-center">
                            <strong class="text-right">Employee:</strong>
                            <small>
                                <span t-field="expense_request_id.employee_id"/>
                            </small>

                        </div>
                        <div class="col-md text-md-center">
                            <strong class="text-right">Date:</strong>
                            <small>
                                <span t-field="expense_request_id.date"/>
                            </small>

                        </div>
                        <div class="col-md text-md-center">
                            <strong class="text-right">Total Amount:</strong>
                            <small>
                                <span t-field="expense_request_id.total_amount"/>
                            </small>
                        </div>
                    </div>
                    <br/>
                    <div class="row no-gutters">

                        <div class="col-md text-md-left">

                            <a t-attf-href="/create-report/#{expense_request_id['id']}"
                               class="btn btn-success"
                               t-if="expense_request_id.state == 'draft'"
                            >
                                <i class="">Create Report</i>
                            </a>
                            <a t-attf-href="/submit-manager/#{expense_request_id['id']}"
                               class="btn btn-success"
                               t-if="expense_request_id.state == 'draft'"
                            >
                                <i class="">Submit To Manager</i>
                            </a>
                        </div>


                    </div>
                </t>
                <t t-set="card_body">
                    <div class="row mb-4">
                        <strong class="col-lg-2">Expense Type</strong>
                        <span class="col-lg-4" t-field="expense_request_id.expense_type"
                        />
                        <strong class="col-lg-2">Account</strong>
                        <span class="col-lg-4" t-field="expense_request_id.account_id"
                        />
                    </div>
                    <div class="row mb-4">
                        <strong class="col-lg-2">Analytic Account</strong>
                        <span class="col-lg-4" t-field="expense_request_id.analytic_account_id"
                        />
                        <strong class="col-lg-2">Analytic Tags</strong>
                        <t t-foreach="expense_request_id.analytic_tag_ids" t-as="note">
                            <a href="#" t-att-title="'View ' + note.name" class="tag"><t
                                    t-esc="note.name"/></a>
                        </t>


                    </div>
                    <div class="row mb-4">

                        <strong class="col-lg-2">Taxes</strong>
                        <t t-foreach="expense_request_id.tax_ids" t-as="tax">
                            <a href="#" t-att-title="'View ' + tax.name" class="tag"><t
                                    t-esc="tax.name"/></a>
                        </t>


                    </div>
                    <div class="row mb-4">
                        <strong class="col-lg-2">Operation</strong>
                        <span class="col-lg-4" t-field="expense_request_id.sales_id"
                        />
                        <strong class="col-lg-2">Operation Type</strong>
                        <span class="col-lg-4" t-field="expense_request_id.operations_type"
                        />
                    </div>
                    <div class="row mb-4">
                        <strong class="col-lg-2">Surgeon</strong>
                        <span class="col-lg-4" t-field="expense_request_id.partner_surgeon_id"
                        />
                        <strong class="col-lg-2">Sales State</strong>
                        <span class="col-lg-4" t-field="expense_request_id.sales_state"
                        />
                    </div>
                    <div class="row mb-4">
                        <strong class="col-lg-2">Expense Date</strong>
                        <span class="col-lg-4" t-field="expense_request_id.date"
                              t-options='{"widget": "date"}'/>

                        <strong class="col-lg-2">Created on</strong>
                        <span class="col-lg-4" t-field="expense_request_id.create_date"
                              t-options='{"widget": "date"}'/>


                    </div>


                    <div class="row mb-4" t-if="expense_request_id.create_uid">
                        <strong class="col-lg-2">Created By</strong>
                        <div class="col-lg-10">

                            <div class="row">
                                <div class="col flex-grow-0 pr-3">
                                    <img class="rounded-circle o_portal_contact_img"
                                         t-attf-src="#{image_data_uri(expense_request_id.create_uid.image_1024)}"
                                         style="width: 40px;height: 40px"
                                         alt="Contact"/>
                                </div>
                                <div class="col pl-sm-0">
                                    <div t-field="expense_request_id.create_uid"
                                         t-options='{"widget": "contact", "fields": ["name", "email"], "no_marker": true}'/>
                                </div>
                            </div>
                        </div>
                    </div>


                    <div class="row mb-4">
                        <strong class="col-lg-2">Attachments:</strong>
                        <div class="col-lg-10">
                            <div class="d-flex flex-wrap">
                                <t t-foreach="attachments" t-as="attachment">
                                    <t t-if="attachment.mimetype and 'image' in attachment.mimetype">
                                        <div class="mr-3 mb-3">
                                            <img t-att-src="'/web/image/%s' % attachment.id" alt="Attachment Image"
                                                 style="max-width: 200px; border-radius: 5px;"/>
                                        </div>
                                    </t>
                                    <t t-else="">
                                        <div class="mr-3 mb-3">
                                            <a t-att-href="'/web/content/%s' % attachment.id"><t
                                                    t-esc="attachment.name"/></a>
                                        </div>
                                    </t>
                                </t>
                            </div>
                        </div>
                    </div>


                    <div class="o_portal_messages_container mt32">
                        <h4>Message and communication history</h4>
                        <t t-call="portal.message_thread">
                            <!--                            <t t-set="token" t-value="request_id.access_token"/>-->
                            <t t-set="object" t-value="expense_request_id"/>
                        </t>
                    </div>

                </t>
            </t>
        </t>
    </template>

    <template id="portal_my_home_menu_expense_requests" name="Portal layout : Expense Requests menu entries"
              inherit_id="portal.portal_breadcrumbs" priority="55">
        <xpath expr="//ol[hasclass('o_portal_submenu')]" position="inside">
            <li t-if="expense_request_id"
                t-attf-class="breadcrumb-item #{'active ' if not expense_request_id else ''}">
                <a t-attf-href="/my/expense/requests?{{ keep_query() }}">Requests</a>
            </li>
            <li t-if="expense_request_id" class="breadcrumb-item active">
                #
                <span t-field="expense_request_id.name"/>
            </li>
        </xpath>
    </template>

    <template id="my_expense_requests" name="Requests">
        <t t-call="portal.portal_layout">
            <div id="successModal" class="modal fade" tabindex="-1" role="dialog" aria-labelledby="successModalLabel"
                 aria-hidden="true">
                <div class="modal-dialog modal-dialog-centered" role="document">
                    <div class="modal-content">
                        <div class="modal-header bg-success text-white">
                            <h5 class="modal-title" id="successModalLabel">Report Created Successfully</h5>
                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                <span aria-hidden="true">&#215;</span>
                            </button>
                        </div>
                        <div class="modal-body custom-modal-body">
                            <p class="custom-modal-text"></p>
                        </div>
                        <div class="modal-footer">
                            <!--                <button type="button" class="btn btn-secondary" data-dismiss="modal">Close</button>-->
                        </div>
                    </div>
                </div>
            </div>

            <t t-set="breadcrumbs_searchbar" t-value="True"/>
            <t t-call="portal.portal_searchbar">
                <t t-set="title">Requests</t>
            </t>
            <div>
                <div class="btn-group btn-block mb16" style="margin: 1em">
                    <a id="submit-ticket" t-attf-href="/expense/request/form">
                        <button t-attf-class="btn btn-primary #{'col-md-10' if multi_type else 'col-md-12'}">
                            Create a Request
                        </button>
                    </a>
                    <a>
                        <button id="submit-selected-expenses" class="btn btn-primary" type="button"
                                style="margin-left: 20px"
                                data-action="submit_selected_expenses"> Create Expenses Report</button>

                    </a>
                </div>
            </div>
            <t class="col-lg-14">
                <h4 style="color:black;">My Expense Requests</h4>
            </t>
            <link type="text/css" rel="stylesheet" href="/expense_portal/static/src/css/expense_table.css"/>

            <t t-call="portal.portal_table">
                <style>


                    .attachment-container {
                        margin-top: 20px;
                    }

                    .attachment-card {
                        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
                        border-radius: 10px;
                        margin-top: 20px;
                        overflow: hidden;
                    }

                    .attachment-card-body {
                        padding: 20px;
                        text-align: center;
                    }

                    .attachment-icon {
                        font-size: 50px;
                        margin-bottom: 15px;
                        color: #007bff;
                    }

                    .attachment-name {
                        font-weight: bold;
                        margin-bottom: 10px;
                    }

                    .attachment-actions {
                        display: flex;
                        justify-content: center;
                        gap: 10px;
                    }

                    .attachment-actions a, .attachment-actions button {
                        font-size: 14px;
                        padding: 5px 15px;
                    }

                    @media (max-width: 768px) {
                        .attachment-icon {
                            font-size: 40px;
                        }

                        .attachment-card-body {
                            padding: 15px;
                        }

                        .attachment-actions a, .attachment-actions button {
                            font-size: 12px;
                            padding: 5px 10px;
                        }
                    }

                    .attachment-container {
                        margin-top: 20px;
                    }

                    .attachment-card {
                        border: 1px solid #dee2e6;
                        border-radius: 0.5rem;
                        transition: transform 0.2s ease-in-out;
                        box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1);
                    }

                    .attachment-card:hover {
                        transform: scale(1.02);
                    }

                    .attachment-card-body {
                        padding: 20px;
                        text-align: center;
                        display: flex;
                        flex-direction: column;
                        align-items: center;
                        justify-content: space-between;
                        height: 100%;
                    }

                    .attachment-icon {
                        font-size: 50px;
                        margin-bottom: 15px;
                        color: #007bff;
                    }

                    .attachment-name {
                        font-weight: bold;
                        margin-bottom: 10px;
                        text-align: center;
                    }

                    .attachment-actions {
                        display: flex;
                        justify-content: space-around;
                        width: 100%;
                    }

                    .attachment-actions a, .attachment-actions button {
                        font-size: 14px;
                        padding: 5px 15px;
                    }

                    @media (max-width: 768px) {
                        .attachment-icon {
                            font-size: 40px;
                        }

                        .attachment-card-body {
                            padding: 15px;
                        }

                        .attachment-actions a, .attachment-actions button {
                            font-size: 12px;
                            padding: 5px 10px;
                        }
                    }

                    /* Modal Styling */
                    @media (max-width: 767.98px) {
                        .modal-dialog {
                            width: 100%;
                            max-width: 100%;
                            margin: 0;
                        }

                        .modal-content {
                            height: 100%;
                            border-radius: 0;
                        }

                        .modal-body {
                            height: calc(100% - 56px);
                            overflow-y: auto;
                        }
                    }
                </style>

                <table class="expense_table" id="expense_table">
                    <thead>
                        <tr class="active">
                            <th class="text-center" width="5%">
                                <input type="checkbox" id="select-all-checkbox"/>
                            </th>
                            <th class="text-left">Description</th>
                            <th class="text-center">Date</th>
                            <th class="text-center">Employee</th>
                            <th class="text-center">Total</th>
                            <th class="text-center">State</th>
                            <th class="text-center"></th>
                        </tr>
                    </thead>
                    <t t-foreach="my_requests" t-as="line">
                        <tr t-attf-class="#{'bgsuccess' if line.sheet_id else ''}">
                            <td class="text-center"><input type="checkbox" class="record-checkbox"
                                                           t-att-value="line.id"/></td>
                            <td class="text-left">
                                <a t-attf-href="/expense/request/#{line.id}?#{keep_query()}">
                                    <span t-esc="line.name"/>
                                </a>
                            </td>
                            <td class="text-center">
                                <span t-field="line.date"/>
                            </td>
                            <td class="text-center">
                                <span t-field="line.employee_id"/>
                            </td>
                            <td class="text-center">
                                <span t-field="line.total_amount"/>
                            </td>
                            <td class="text-center">
                                <span class="badge badge-pill badge-success" t-esc="line.state"/>
                            </td>
                            <td class="text-center">
                                <div class="row" style="display: flex;">
                                    <a t-attf-href="/expense/request/edit/#{line.id}" class="btn btn-primary btn-sm"
                                       t-if="line.state == 'draft'">
                                        <i class="fa fa-edit"></i>
                                        Edit
                                    </a>
                                    <a t-attf-href="#" class="btn btn-danger btn-sm delete_expense_button"
                                       t-if="line.state == 'draft'" t-att-id="line.id">
                                        <i class="fa fa-trash"></i>
                                        Delete
                                    </a>

                                    <t t-if="request.env['ir.attachment'].sudo().search([
            ('res_model', '=', 'hr.expense'),
            ('res_id', '=', line.id)
        ])">
                                        <button type="button" class="btn btn-warning btn-sm" data-toggle="modal"
                                                t-attf-data-target="#attachmentModal_#{line.id}">
                                            <i class="fa fa-eye"></i> View Attachments
                                        </button>
                                    </t>
                                </div>

                                <!-- Eye Icon Button for Attachments -->

                            </td>
                        </tr>

                        <!-- Modal for Viewing Attachments for Each Record -->
                        <t t-if="request.env['ir.attachment'].sudo().search([
            ('res_model', '=', 'hr.expense'),
            ('res_id', '=', line.id)
        ])">
                            <div class="modal fade" t-attf-id="attachmentModal_#{line.id}" tabindex="-1" role="dialog"
                                 aria-labelledby="attachmentModalLabel" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-xl" role="document">
                                    <div class="modal-content">
                                        <div class="modal-header">
                                            <h5 class="modal-title" id="attachmentModalLabel">Attachments for <t
                                                    t-esc="line.name"/></h5>
                                            <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                                                <span aria-hidden="true">X</span>
                                            </button>
                                        </div>
                                        <div class="modal-body">
                                            <div class="attachment-container">
                                                <div class="row">
                                                    <t t-foreach="request.env['ir.attachment'].sudo().search([
            ('res_model', '=', 'hr.expense'),
            ('res_id', '=', line.id)
        ])" t-as="attach">
                                                        <t t-if="attach.extension.lower() in ['.pdf', '.xlsx', '.xls', '.jpg', '.jpeg', '.png', '.gif']">
                                                            <!-- Attachment Card -->
                                                            <div class="col-md-3 col-sm-6 mb-4">
                                                                <div class="attachment-card h-100 bg-white">
                                                                    <div class="attachment-card-body">
                                                                        <!-- Icons for file type -->
                                                                        <i t-if="attach.extension.lower() == '.pdf'"
                                                                           class="fa fa-file-pdf attachment-icon text-danger"></i>
                                                                        <i t-if="attach.extension.lower() in ['.xlsx', '.xls']"
                                                                           class="fa fa-file-excel text-success attachment-icon"></i>
                                                                        <img t-if="attach.extension.lower() in ['.jpg', '.jpeg', '.png', '.gif']"
                                                                             t-attf-src="/web/content/#{attach.id}"
                                                                             alt="Image Preview"
                                                                             class="img-thumbnail"
                                                                             style="width:100%; height:auto; max-height:150px;"/>

                                                                        <div class="attachment-name">
                                                                            <t t-esc="attach.name"/>
                                                                        </div>
                                                                        <div class="attachment-actions">
                                                                            <a t-attf-href="/web/content/#{attach.id}?download=true"
                                                                               class="btn btn-success btn-xs"
                                                                               target="_blank">
                                                                                <i class="fa fa-download"></i> Download
                                                                            </a>
                                                                            <button type="button"
                                                                                    class="btn btn-warning btn-xs"
                                                                                    data-toggle="modal"
                                                                                    t-attf-data-target="#attachmentModalPreview_#{attach.id}">
                                                                                <i class="fa fa-eye"></i> Preview
                                                                            </button>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>

                                                            <!-- Modal for Attachment Preview -->
                                                            <div class="modal fade"
                                                                 t-attf-id="attachmentModalPreview_#{attach.id}"
                                                                 tabindex="-1"
                                                                 role="dialog" aria-labelledby="attachmentModalLabel"
                                                                 aria-hidden="true">
                                                                <div class="modal-dialog modal-dialog-centered modal-xl"
                                                                     role="document">
                                                                    <div class="modal-content">
                                                                        <div class="modal-header">
                                                                            <h5 class="modal-title"
                                                                                id="attachmentModalLabel">Preview: <t
                                                                                    t-esc="attach.name"/></h5>
                                                                            <button type="button" class="close"
                                                                                    data-dismiss="modal"
                                                                                    aria-label="Close">
                                                                                <span aria-hidden="true">X</span>
                                                                            </button>
                                                                        </div>
                                                                        <div class="modal-body">
                                                                            <t t-if="attach.extension.lower() == '.pdf'">
                                                                                <iframe t-attf-src="/web/content/#{attach.id}"
                                                                                        width="100%"
                                                                                        height="600px"></iframe>
                                                                            </t>
                                                                            <t t-elif="attach.extension.lower() in ['.xlsx', '.xls']">
                                                                                <p>This is an Excel file. Please
                                                                                    download it to view.</p>
                                                                                <a t-attf-href="/web/content/#{attach.id}?download=true"
                                                                                   target="_blank"
                                                                                   class="btn btn-primary">
                                                                                    Download Excel File
                                                                                </a>
                                                                            </t>
                                                                            <t t-elif="attach.extension.lower() in ['.jpg', '.jpeg', '.png', '.gif']">
                                                                                <img t-attf-src="/web/content/#{attach.id}"
                                                                                     width="100%" height="auto"
                                                                                     alt="Image Preview"/>
                                                                            </t>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </t>
                                                    </t>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </t>
                    </t>
                </table>
            </t>
        </t>
    </template>


    <template id="expense_portal_request_form">
        <link rel="stylesheet" href="/expense_portal/static/src/chocies/styles/choices.min.css"/>
        <link rel="stylesheet" href="/expense_portal/static/src/css/autocompleted.css"/>

        <!--        <script src="/portal_custom/static/src/js/select2.min.js"></script>-->
        <!--        <link rel="stylesheet" href="/portal_custom/static/src/css/select2.css" type="text/css"/>-->
        <t t-call="portal.portal_layout">
            <t t-set="additional_title">Expense Request</t>
            <h4 style="color:#CA6F1E;"></h4>
            <form action="/expense/request/create" id="expenses" enctype="multipart/form-data" method="post"
                  class="new_expense_form"
                  data-model_name="hr.expense">
                <script type="text/javascript" src="/web/static/lib/jquery/jquery.js"/>

                <input type="hidden" name="csrf_token" t-att-value="request.csrf_token()"/>
                <t t-if="pass_message">
                    <div class="row" role="alert">
                        <div class="container">
                            <div clas="row">
                                <div class="col-8 alert alert-success">
                                    <h5 class="text-center" t-if="expense_request_id">
                                        <i class="fa fa-check-circle fa-2x text-success" role="img" aria-label="Success"
                                           title="Success"/>
                                    </h5>
                                    <t t-if="expense_request_id">
                                        <h5 class="text-center">
                                            Your Request Number is
                                            <a t-attf-href="/expense/request/#{expense_request_id.id}">
                                                #
                                                <span t-esc="expense_request_id.name"/>
                                            </a>
                                            Request Creation Successfully Done! .
                                        </h5>
                                    </t>
                                </div>
                            </div>
                        </div>
                    </div>
                </t>
                <t t-if="message">
                    <div class="alert alert-danger" role="alert">
                        <t t-esc="message"/>
                    </div>
                </t>
                <t t-if="warn_message">
                    <div class="alert alert-warning" role="alert">
                        <t t-esc="warn_message"/>
                    </div>
                </t>
                <div class="card shadow o_portal_details">
                    <div class="card-header py-3">
                        <h6 class="m-0 font-weight-bold  text-primary" style="font-size: 21px;font-weight: 600;">
                            Expense Request</h6>
                    </div>
                    <div class="card-body">
                        <div class="row">
                            <div class="col-lg-12">
                                <div t-if="error_message" class="alert alert-danger" role="alert">
                                    <t t-foreach="error_message" t-as="err">
                                        <t t-esc="err"/>
                                        <br/>
                                    </t>
                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div t-attf-class="form-group col-xl-8" id="description">
                                <label class="col-form-label font-weight-bold text-primary" for="description">
                                    Description</label>
                                <input type="text" class="form-control o_website_form_input description"
                                       autocomplete="off"
                                       t-att-value="default_values.get('description', '')" required="1"
                                       name="description"/>
                            </div>

                        </div>
                        <div class="row">
                            <div t-attf-class="form-group col-xl-6">
                                <label class="col-form-label font-weight-bold text-primary" for="product">Expense
                                    Type</label>
                                <select class="form-control o_website_form_input expense_type" id="expense_type"
                                        name="expense_type"
                                        required="1">
                                    <option value="" selected="selected" disabled="disabled"/>
                                    <option value="direct_expense">Direct Expense</option>
                                    <option value="trust">Trust</option>
                                    <option value="trust_recon">Trust Reconciliation</option>
                                </select>
                            </div>

                        </div>
                        <div class="row">
                            <!--                                                        <div t-attf-class="form-group col-xl-6">-->
                            <!--                                                            <label class="m-0 font-weight-bold text-primary" for="product">Product</label>-->
                            <!--                                                            <select class="form-control o_website_form_input" id="product" name="product"-->
                            <!--                                                                    required="1">-->
                            <!--                                                                &lt;!&ndash; <option t-esc="product.name" t-att-value="product.id"/> &ndash;&gt;-->
                            <!--                                                                <t t-foreach="products" t-as="obj">-->
                            <!--                                                                    <option t-esc="obj.display_name"-->
                            <!--                                                                            t-att-value="obj.id"></option>-->
                            <!--                                                                </t>-->
                            <!--                                                            </select>-->
                            <!--                                                        </div>-->


                            <div t-attf-class="form-group col-xl-6 product-auto-widget">

                                <label class="col-form-label font-weight-bold text-primary" for="product">Product
                                </label>

                                <input type="text" class="form-control product-input" id="product_input"
                                       autocomplete="off"
                                       required="required"/>
                                <input type="hidden" id="product" name="product" class="product"/>
                                <div id="custom_product_dropdown" class="custom-dropdown custom-product-dropdown"
                                     style="display: none;"></div>
                            </div>


                            <div t-attf-class="form-group col-xl-6">
                                <label class="col-form-label font-weight-bold text-primary" for="account_id">
                                    Account</label>
                                <select class="form-control o_website_form_input" id="account_id" name="account_id"
                                        readonly="True"
                                >

                                </select>
                            </div>
                        </div>
                        <div class="row">
                            <!--                            <div t-attf-class="form-group col-xl-6">-->
                            <!--                                <label class="m-0 font-weight-bold text-primary" for="analytic_account">Analytic Account</label>-->
                            <!--                                <select class="form-control o_website_form_input" id="analytic_account"-->
                            <!--                                        name="analytic_account"-->
                            <!--                                        required="1">-->
                            <!--                                    &lt;!&ndash; <option t-esc="product.name" t-att-value="product.id"/> &ndash;&gt;-->
                            <!--                                    <t t-foreach="analytic_account" t-as="obj">-->
                            <!--                                        <option t-esc="obj.display_name"-->
                            <!--                                                t-att-value="obj.id"></option>-->
                            <!--                                    </t>-->
                            <!--                                </select>-->
                            <!--                            </div>-->


                            <div t-attf-class="form-group col-xl-6 analytic-auto-widget">

                                <label class="col-form-label font-weight-bold text-primary" for="analytic">Analytic
                                    Account
                                </label>

                                <input type="text" class="form-control analytic-input" id="analytic_input"
                                       autocomplete="off"
                                       required="required"/>
                                <input type="hidden" id="analytic_account" name="analytic_account"
                                       class="analytic_account"/>
                                <div id="custom_analytic_dropdown" class="custom-dropdown custom-analytic-dropdown"
                                     style="display: none;"></div>
                            </div>

                            <div t-attf-class="form-group col-xl-6">
                                <label class="col-form-label font-weight-bold text-primary" for="analytic_account_tag">
                                    Analytic Tag</label>

                                <div class="categories-select-wrapper">
                                    <select class="form-control product_categ_select analytic_tag_ids"
                                            name="product_categ_ids[]" id="product_categ_ids"
                                            multiple="multiple">
                                        <t t-foreach="analytic_account_tag"
                                           t-as="category">
                                            <option
                                                    t-att-value="category.id">
                                                <t t-esc="category.display_name"/>
                                            </option>
                                        </t>
                                    </select>
                                </div>


                            </div>
                        </div>
                        <div class="row">

                            <div t-attf-class="form-group col-xl-6">
                                <label class="m-0 font-weight-bold text-primary" for="tax_ids">Taxes</label>

                                <div class="categories-select-wrapper">
                                    <select class="form-control tax_ids"
                                            name="tax_ids[]" id="tax_ids"
                                            multiple="multiple">
                                        <t t-foreach="taxes"
                                           t-as="tax">
                                            <option
                                                    t-att-value="tax.id">
                                                <t t-esc="tax.display_name"/>
                                            </option>
                                        </t>
                                    </select>
                                </div>


                            </div>
                        </div>
                        <div class="row">


                            <div t-attf-class="form-group col-xl-6 operations-auto-widget">
                                <label class="m-0 font-weight-bold text-primary">Operations

                                </label>
                                <input type="text" class="form-control operations-input" id="operations_input"
                                       autocomplete="off"
                                />
                                <input type="hidden" id="sales_id" autocomplete="off"
                                       class="sales_id"
                                       name="sales_id"/>
                                <div id="custom_operations_dropdown" class="custom-dropdown custom-operations-dropdown"
                                     style="display: none;"></div>
                            </div>


                            <div t-attf-class="form-group col-xl-6">
                                <label class="m-0 font-weight-bold text-primary" for="operations_type">Operation
                                    Type</label>
                                <select class="form-control o_website_form_input" id="operations_type"
                                        name="operations_type" readonly="True"
                                >

                                </select>
                            </div>
                        </div>


                        <div class="row">


                            <div t-attf-class="form-group col-xl-6 surgeons-auto-widget">
                                <label class="m-0 font-weight-bold text-primary">Surgeon

                                </label>
                                <input type="text" class="form-control surgeons-input" id="surgeons_input"
                                       autocomplete="off"
                                />
                                <input type="hidden" id="partner_surgeons_id" autocomplete="off"
                                       class="partner_surgeon_id"
                                       name="partner_surgeons_id"/>
                                <div id="custom_surgeons_dropdown" class="custom-dropdown custom-surgeons-dropdown"
                                     style="display: none;"></div>
                            </div>

                            <div t-attf-class="form-group col-xl-6">
                                <label class="m-0 font-weight-bold text-primary" for="sales_state">Sales state</label>
                                <input class="form-control o_website_form_input" type="text" name="sales_state"
                                       readonly="True"
                                       id="sales_state"/>

                            </div>
                        </div>
                        <div class="row">

                            <div t-attf-class="form-group col-xl-6">
                                <label class="m-0 font-weight-bold text-primary" for="unit_price">Unit Price</label>
                                <input type="number" class="form-control o_website_form_input unit_price"
                                       t-att-value="default_values.get('unit_price',0.0)" required="1" step="0.001"
                                       name="unit_price" id="unit_price"/>
                            </div>
                            <div t-attf-class="form-group col-xl-6">
                                <label class="m-0 font-weight-bold text-primary" for="sales_id">Currency</label>
                                <select class="form-control o_website_form_input currency_id" id="currency_id"
                                        name="currency_id"
                                >
                                    <t t-foreach="currency" t-as="obj">
                                        <option t-esc="obj.display_name" t-att-selected="default_currency.id == obj.id"
                                                t-att-value="obj.id">

                                        </option>
                                    </t>
                                </select>
                            </div>

                        </div>
                        <div class="row">
                            <div t-attf-class="form-group col-xl-6">
                                <label class="m-0 font-weight-bold text-primary" for="employee" id="employee">
                                    Employee</label>
                                <select class="form-control o_website_form_input employee" id="employee" name="employee"
                                        required="1">
                                    <option t-esc="employee.name" t-att-value="employee.id"/>
                                    <!--                                    <t t-foreach="employees" t-as="obj">-->
                                    <!--                                        <option t-esc="obj.name" t-att-value="obj.id"></option>-->
                                    <!--                                    </t>-->
                                </select>
                            </div>

                            <div t-attf-class="form-group col-xl-6">
                                <label class="m-0 font-weight-bold text-primary" for="quantity">Quantity</label>
                                <input type="number" class="form-control o_website_form_input quantity"
                                       t-att-value="default_values.get('quantity',1)" id="quantity" required="1"
                                       name="quantity"/>
                            </div>
                        </div>
                        <div class="row">
                            <div t-attf-class="form-group col-xl-6">
                                <label class="m-0 font-weight-bold text-primary" for="total">Total</label>
                                <input type="number" class="form-control o_website_form_input" disabled="1"
                                       t-att-value="default_values.get('total',0.0)" step="0.001"
                                       name="total" id="total"/>
                            </div>
                            <div t-attf-class="form-group col-xl-6">
                                <label class="m-0 font-weight-bold text-primary" for="total">Attachment</label>

                                <div class="input-group">
                                    <div class="custom-file">
                                        <input type="file"
                                               name="attachment_ids"
                                               class="custom-file-input"
                                               id="attachment_ids"/>
                                        <label class="custom-file-label" multiple="multiple"
                                               for="attachment_ids">
                                            Choose file</label>
                                    </div>

                                </div>
                            </div>
                        </div>
                        <div class="row">
                            <div t-attf-class="form-group col-xl-6">
                                <label class="m-0 font-weight-bold text-primary" for="date" readonly="">Date</label>
                                <!-- To get the date from portal expense form to the internal expense report -->
                                <input type="date" name="date" t-attf-class="date"
                                       t-att-value="default_values.get('date', '')"/>

                                <input type="date" name="date" t-attf-class="form-control"
                                       t-att-value="default_values.get('date', '')"/>
                            </div>
                        </div>
                        <br/>
                        <div class="form-footer">
                            <!--                            <button type="submit"-->
                            <!--                                    class="btn btn-primary float-right mb32">-->
                            <!--                                Create-->
                            <!--                                <span class="fa fa-long-arrow-right"/>-->
                            <!--                            </button>-->
                            <!--                          -->
                            <button type="button"
                                    class="btn btn-primary float-right mb32 new_expense_confirm"
                                    name="new_expense_confirm" id="new_expense_confirm"
                            >
                                Submit
                                <span class="fa fa-long-arrow-right"/>
                            </button>

                        </div>
                    </div>
                </div>
                <input type="hidden" name="redirect" t-att-value="redirect"/>

            </form>
        </t>
    </template>
</odoo>
